<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UriDokoï¼ˆã‚¦ãƒªãƒ‰ã‚³ï¼‰â€” ã©ã“ã§å£²ã‚‹ã®ãŒä¸€ç•ªå¾—ï¼Ÿ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #2563eb;
  --primary-light: #3b82f6;
  --primary-bg: #eff6ff;
  --success: #16a34a;
  --success-bg: #f0fdf4;
  --warning: #d97706;
  --warning-bg: #fffbeb;
  --gray-50: #f9fafb;
  --gray-100: #f3f4f6;
  --gray-200: #e5e7eb;
  --gray-300: #d1d5db;
  --gray-400: #9ca3af;
  --gray-500: #6b7280;
  --gray-600: #4b5563;
  --gray-700: #374151;
  --gray-800: #1f2937;
  --gray-900: #111827;
  --radius: 12px;
  --radius-sm: 8px;
  --shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
  --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Noto Sans JP', 'Inter', -apple-system, sans-serif;
  background: var(--gray-50);
  color: var(--gray-800);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
}

/* Header */
.header {
  background: white;
  border-bottom: 1px solid var(--gray-200);
  padding: 16px 0;
  position: sticky;
  top: 0;
  z-index: 100;
}
.header-inner {
  max-width: 960px;
  margin: 0 auto;
  padding: 0 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.logo {
  display: flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  color: var(--gray-900);
}
.logo-icon {
  width: 36px;
  height: 36px;
  background: var(--primary);
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 18px;
  font-weight: 700;
}
.logo-text {
  font-size: 20px;
  font-weight: 700;
  letter-spacing: -0.5px;
}
.logo-sub {
  font-size: 12px;
  color: var(--gray-500);
  font-weight: 400;
}
.header-badge {
  font-size: 12px;
  background: var(--primary-bg);
  color: var(--primary);
  padding: 4px 12px;
  border-radius: 20px;
  font-weight: 600;
}

/* Hero */
.hero {
  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
  color: white;
  padding: 48px 20px;
  text-align: center;
}
.hero h1 {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 12px;
  letter-spacing: -0.5px;
}
.hero p {
  font-size: 16px;
  opacity: 0.9;
  max-width: 500px;
  margin: 0 auto;
}

/* Main */
.main {
  max-width: 960px;
  margin: 0 auto;
  padding: 32px 20px;
}

/* Calculator Card */
.calc-card {
  background: white;
  border-radius: var(--radius);
  box-shadow: var(--shadow-md);
  padding: 28px;
  margin-bottom: 24px;
}
.calc-card h2 {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.calc-card h2 .icon {
  font-size: 20px;
}

/* Form Grid */
.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
@media (max-width: 600px) {
  .form-grid { grid-template-columns: 1fr; }
}
.form-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.form-group.full-width {
  grid-column: 1 / -1;
}
.form-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--gray-600);
}
.form-input {
  padding: 10px 14px;
  border: 1.5px solid var(--gray-200);
  border-radius: var(--radius-sm);
  font-size: 15px;
  font-family: inherit;
  transition: border-color 0.2s, box-shadow 0.2s;
  background: white;
}
.form-input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(37,99,235,0.1);
}
.form-input::placeholder {
  color: var(--gray-400);
}
.input-suffix {
  display: flex;
  align-items: center;
  gap: 0;
}
.input-suffix input {
  border-radius: var(--radius-sm) 0 0 var(--radius-sm);
  border-right: none;
  flex: 1;
}
.input-suffix .suffix {
  padding: 10px 14px;
  background: var(--gray-100);
  border: 1.5px solid var(--gray-200);
  border-left: none;
  border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
  font-size: 13px;
  color: var(--gray-500);
  font-weight: 500;
  white-space: nowrap;
}

/* Size inputs */
.size-inputs {
  display: flex;
  gap: 8px;
  align-items: center;
}
.size-inputs input {
  width: 70px;
  text-align: center;
}
.size-sep {
  color: var(--gray-400);
  font-weight: 500;
}

/* Calculate Button */
.calc-btn {
  width: 100%;
  padding: 14px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 16px;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
  transition: background 0.2s, transform 0.1s;
  margin-top: 8px;
}
.calc-btn:hover { background: var(--primary-light); }
.calc-btn:active { transform: scale(0.99); }

/* Results */
.results-section {
  display: none;
}
.results-section.visible {
  display: block;
}

/* Platform Card */
.platform-cards {
  display: grid;
  gap: 12px;
}
.platform-card {
  background: white;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 20px 24px;
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 16px;
  align-items: center;
  border: 2px solid transparent;
  transition: border-color 0.2s, box-shadow 0.2s;
}
.platform-card.best {
  border-color: var(--success);
  box-shadow: var(--shadow-md), 0 0 0 3px rgba(22,163,74,0.1);
}
.platform-card .rank {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 16px;
}
.platform-card.best .rank {
  background: var(--success);
  color: white;
}
.platform-card:not(.best) .rank {
  background: var(--gray-100);
  color: var(--gray-500);
}
.platform-info h3 {
  font-size: 16px;
  font-weight: 700;
  margin-bottom: 2px;
}
.platform-info .details {
  font-size: 13px;
  color: var(--gray-500);
}
.platform-amount {
  text-align: right;
}
.platform-amount .amount {
  font-size: 22px;
  font-weight: 700;
  color: var(--gray-900);
}
.platform-card.best .platform-amount .amount {
  color: var(--success);
}
.platform-amount .label {
  font-size: 11px;
  color: var(--gray-500);
  font-weight: 500;
}
.best-badge {
  display: inline-block;
  background: var(--success-bg);
  color: var(--success);
  font-size: 11px;
  font-weight: 700;
  padding: 2px 8px;
  border-radius: 4px;
  margin-left: 8px;
}

/* Breakdown */
.breakdown-toggle {
  background: none;
  border: none;
  color: var(--primary);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  font-family: inherit;
  padding: 4px 0;
  margin-top: 4px;
}
.breakdown {
  display: none;
  grid-column: 1 / -1;
  padding: 16px;
  background: var(--gray-50);
  border-radius: var(--radius-sm);
  font-size: 13px;
}
.breakdown.visible { display: block; }
.breakdown-row {
  display: flex;
  justify-content: space-between;
  padding: 4px 0;
}
.breakdown-row.total {
  border-top: 1px solid var(--gray-200);
  margin-top: 8px;
  padding-top: 8px;
  font-weight: 700;
}

/* Category Tips */
.tips-card {
  background: var(--warning-bg);
  border: 1px solid #fde68a;
  border-radius: var(--radius);
  padding: 16px 20px;
  margin-top: 16px;
  font-size: 14px;
}
.tips-card .tip-title {
  font-weight: 700;
  font-size: 14px;
  margin-bottom: 6px;
  display: flex;
  align-items: center;
  gap: 6px;
}

/* Packaging Section */
.packaging-card {
  background: white;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 20px 24px;
  margin-top: 16px;
}
.packaging-card h3 {
  font-size: 15px;
  font-weight: 700;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 6px;
}
.pkg-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 10px;
}
.pkg-item {
  background: var(--gray-50);
  border-radius: var(--radius-sm);
  padding: 12px;
  font-size: 13px;
}
.pkg-item .pkg-name { font-weight: 600; margin-bottom: 2px; }
.pkg-item .pkg-size { color: var(--gray-500); font-size: 12px; }
.pkg-item .pkg-price { color: var(--primary); font-weight: 600; margin-top: 4px; }

/* Footer */
.footer {
  text-align: center;
  padding: 32px 20px;
  color: var(--gray-400);
  font-size: 13px;
}

/* Category Select */
select.form-input {
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%236b7280' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 32px;
}
</style>
</head>
<body>

<header class="header">
  <div class="header-inner">
    <a href="#" class="logo">
      <div class="logo-icon">å£²</div>
      <div>
        <div class="logo-text">UriDoko</div>
        <div class="logo-sub">æœ€é©ãªå£²ã‚Šå ´ãŒä¸€ç¬ã§ã‚ã‹ã‚‹</div>
      </div>
    </a>
    <span class="header-badge">ç„¡æ–™ãƒ„ãƒ¼ãƒ«</span>
  </div>
</header>

<section class="hero">
  <h1>ã©ã“ã§å£²ã‚‹ã®ãŒä¸€ç•ªå¾—ï¼Ÿ</h1>
  <p>å•†å“æƒ…å ±ã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€6ã¤ã®ãƒ•ãƒªãƒãƒ»ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã‚µã‚¤ãƒˆã®æ‰‹å–ã‚Šé¡ã‚’ç¬é–“æ¯”è¼ƒ</p>
</section>

<main class="main">
  <div class="calc-card">
    <h2><span class="icon">ğŸ“¦</span> å•†å“æƒ…å ±ã‚’å…¥åŠ›</h2>
    <div class="form-grid">
      <div class="form-group">
        <label class="form-label">å£²ã‚ŠãŸã„ä¾¡æ ¼</label>
        <div class="input-suffix">
          <input type="number" id="price" class="form-input" placeholder="3,000" min="300">
          <span class="suffix">å††</span>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">ä»•å…¥ã‚Œä¾¡æ ¼ï¼ˆä»»æ„ï¼‰</label>
        <div class="input-suffix">
          <input type="number" id="cost" class="form-input" placeholder="0" min="0">
          <span class="suffix">å††</span>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">å•†å“ã‚«ãƒ†ã‚´ãƒª</label>
        <select id="category" class="form-input">
          <option value="general">ãã®ä»–/ä¸€èˆ¬</option>
          <option value="fashion">ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ãƒ»è¡£é¡</option>
          <option value="electronics">å®¶é›»ãƒ»é›»å­æ©Ÿå™¨</option>
          <option value="books">æœ¬ãƒ»æ¼«ç”»ãƒ»é›‘èªŒ</option>
          <option value="games">ã‚²ãƒ¼ãƒ ãƒ»ãŠã‚‚ã¡ã‚ƒ</option>
          <option value="beauty">ã‚³ã‚¹ãƒ¡ãƒ»ç¾å®¹</option>
          <option value="sports">ã‚¹ãƒãƒ¼ãƒ„ãƒ»ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢</option>
          <option value="handmade">ãƒãƒ³ãƒ‰ãƒ¡ã‚¤ãƒ‰</option>
          <option value="furniture">å®¶å…·ãƒ»ã‚¤ãƒ³ãƒ†ãƒªã‚¢</option>
          <option value="baby">ãƒ™ãƒ“ãƒ¼ãƒ»ã‚­ãƒƒã‚º</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">é‡é‡</label>
        <div class="input-suffix">
          <input type="number" id="weight" class="form-input" placeholder="500" min="0" step="10">
          <span class="suffix">g</span>
        </div>
      </div>
      <div class="form-group full-width">
        <label class="form-label">ã‚µã‚¤ã‚ºï¼ˆ3è¾ºã®åˆè¨ˆãŒã‚ã‹ã‚‹å ´åˆï¼‰</label>
        <div class="size-inputs">
          <input type="number" id="sizeW" class="form-input" placeholder="ç¸¦" min="0"> <span class="size-sep">Ã—</span>
          <input type="number" id="sizeH" class="form-input" placeholder="æ¨ª" min="0"> <span class="size-sep">Ã—</span>
          <input type="number" id="sizeD" class="form-input" placeholder="é«˜ã•" min="0"> <span class="size-sep">cm</span>
        </div>
      </div>
    </div>
    <button class="calc-btn" onclick="calculate()">ğŸ” æœ€é©ãªå£²ã‚Šå ´ã‚’æ¯”è¼ƒã™ã‚‹</button>
  </div>

  <div class="results-section" id="results">
    <div class="calc-card">
      <h2><span class="icon">ğŸ†</span> æ¯”è¼ƒçµæœ</h2>
      <div class="platform-cards" id="platformCards"></div>
    </div>

    <div id="tipsContainer"></div>

    <div class="packaging-card" id="packagingCard" style="display:none;">
      <h3>ğŸ“ ãŠã™ã™ã‚æ¢±åŒ…æ–¹æ³•</h3>
      <div class="pkg-grid" id="packagingGrid"></div>
    </div>
  </div>
</main>

<footer class="footer">
  <p>Â© 2026 UriDoko â€” æ‰‹æ•°æ–™ãƒ»é€æ–™ãƒ‡ãƒ¼ã‚¿ã¯2026å¹´3æœˆæ™‚ç‚¹ã®ã‚‚ã®ã§ã™</p>
  <p style="margin-top:4px;">â€» å®Ÿéš›ã®æ‰‹æ•°æ–™ãƒ»é€æ–™ã¯å¤‰å‹•ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚æœ€æ–°æƒ…å ±ã¯å„ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã”ç¢ºèªãã ã•ã„ã€‚</p>
</footer>

<script>
// Platform data: fees, shipping methods
const PLATFORMS = [
  {
    id: 'mercari',
    name: 'ãƒ¡ãƒ«ã‚«ãƒª',
    feeRate: 0.10,
    shipping: [
      { name: 'ãƒã‚³ãƒã‚¹', maxWeight: 1000, maxSize: 31.2+22.8+3, cost: 210 },
      { name: 'ã‚†ã†ãƒ‘ã‚±ãƒƒãƒˆ', maxWeight: 1000, maxSize: 60, cost: 230 },
      { name: 'å®…æ€¥ä¾¿ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆ', maxWeight: Infinity, maxSize: 60, cost: 450 },
      { name: 'ã‚†ã†ãƒ‘ã‚±ãƒƒãƒˆãƒã‚¹ãƒˆ', maxWeight: 2000, maxSize: 60, cost: 215 },
      { name: '60ã‚µã‚¤ã‚º', maxWeight: 2000, maxSize: 60, cost: 750 },
      { name: '80ã‚µã‚¤ã‚º', maxWeight: 5000, maxSize: 80, cost: 850 },
      { name: '100ã‚µã‚¤ã‚º', maxWeight: 10000, maxSize: 100, cost: 1050 },
      { name: '120ã‚µã‚¤ã‚º', maxWeight: 15000, maxSize: 120, cost: 1200 },
      { name: '140ã‚µã‚¤ã‚º', maxWeight: 20000, maxSize: 140, cost: 1450 },
      { name: '160ã‚µã‚¤ã‚º', maxWeight: 25000, maxSize: 160, cost: 1700 },
    ],
    color: '#e74c3c',
    popularity: { fashion: 5, electronics: 4, books: 4, games: 5, beauty: 5, sports: 3, handmade: 4, furniture: 3, baby: 5, general: 4 }
  },
  {
    id: 'rakuma',
    name: 'ãƒ©ã‚¯ãƒ',
    feeRate: 0.06,
    shipping: [
      { name: 'ã‹ã‚“ãŸã‚“ãƒ©ã‚¯ãƒãƒ‘ãƒƒã‚¯(ãƒã‚³ãƒã‚¹)', maxWeight: 1000, maxSize: 57, cost: 200 },
      { name: 'ã‹ã‚“ãŸã‚“ãƒ©ã‚¯ãƒãƒ‘ãƒƒã‚¯(60)', maxWeight: 2000, maxSize: 60, cost: 800 },
      { name: 'ã‹ã‚“ãŸã‚“ãƒ©ã‚¯ãƒãƒ‘ãƒƒã‚¯(80)', maxWeight: 5000, maxSize: 80, cost: 900 },
      { name: 'ã‹ã‚“ãŸã‚“ãƒ©ã‚¯ãƒãƒ‘ãƒƒã‚¯(100)', maxWeight: 10000, maxSize: 100, cost: 1150 },
      { name: 'ã‹ã‚“ãŸã‚“ãƒ©ã‚¯ãƒãƒ‘ãƒƒã‚¯(120)', maxWeight: 15000, maxSize: 120, cost: 1350 },
      { name: 'ã‹ã‚“ãŸã‚“ãƒ©ã‚¯ãƒãƒ‘ãƒƒã‚¯(140)', maxWeight: 20000, maxSize: 140, cost: 1550 },
      { name: 'ã‹ã‚“ãŸã‚“ãƒ©ã‚¯ãƒãƒ‘ãƒƒã‚¯(160)', maxWeight: 25000, maxSize: 160, cost: 1800 },
    ],
    color: '#6f42c1',
    popularity: { fashion: 4, electronics: 3, books: 3, games: 3, beauty: 4, sports: 2, handmade: 3, furniture: 2, baby: 4, general: 3 }
  },
  {
    id: 'yahoo_flea',
    name: 'Yahoo!ãƒ•ãƒªãƒ',
    feeRate: 0.05,
    shipping: [
      { name: 'ãŠã¦ãŒã‚‹é…é€(ãƒã‚³ãƒã‚¹)', maxWeight: 1000, maxSize: 57, cost: 170 },
      { name: 'ãŠã¦ãŒã‚‹é…é€(60)', maxWeight: 2000, maxSize: 60, cost: 750 },
      { name: 'ãŠã¦ãŒã‚‹é…é€(80)', maxWeight: 5000, maxSize: 80, cost: 850 },
      { name: 'ãŠã¦ãŒã‚‹é…é€(100)', maxWeight: 10000, maxSize: 100, cost: 1050 },
      { name: 'ãŠã¦ãŒã‚‹é…é€(120)', maxWeight: 15000, maxSize: 120, cost: 1200 },
      { name: 'ãŠã¦ãŒã‚‹é…é€(140)', maxWeight: 20000, maxSize: 140, cost: 1450 },
      { name: 'ãŠã¦ãŒã‚‹é…é€(160)', maxWeight: 25000, maxSize: 160, cost: 1700 },
    ],
    color: '#ff6600',
    popularity: { fashion: 3, electronics: 3, books: 3, games: 3, beauty: 2, sports: 2, handmade: 2, furniture: 2, baby: 3, general: 3 }
  },
  {
    id: 'yahoo_auction',
    name: 'ãƒ¤ãƒ•ã‚ªã‚¯!',
    feeRate: 0.088,
    shipping: [
      { name: 'ãŠã¦ãŒã‚‹é…é€(ãƒã‚³ãƒã‚¹)', maxWeight: 1000, maxSize: 57, cost: 170 },
      { name: 'ãŠã¦ãŒã‚‹é…é€(60)', maxWeight: 2000, maxSize: 60, cost: 750 },
      { name: 'ãŠã¦ãŒã‚‹é…é€(80)', maxWeight: 5000, maxSize: 80, cost: 850 },
      { name: 'ãŠã¦ãŒã‚‹é…é€(100)', maxWeight: 10000, maxSize: 100, cost: 1050 },
      { name: 'ãŠã¦ãŒã‚‹é…é€(120)', maxWeight: 15000, maxSize: 120, cost: 1200 },
      { name: 'ãŠã¦ãŒã‚‹é…é€(140)', maxWeight: 20000, maxSize: 140, cost: 1450 },
      { name: 'ãŠã¦ãŒã‚‹é…é€(160)', maxWeight: 25000, maxSize: 160, cost: 1700 },
    ],
    color: '#ff0033',
    popularity: { fashion: 3, electronics: 5, books: 4, games: 4, beauty: 2, sports: 4, handmade: 2, furniture: 4, baby: 2, general: 4 }
  },
  {
    id: 'booth',
    name: 'BOOTH',
    feeRate: 0.056,
    shipping: [
      { name: 'ã‚ã‚“ã—ã‚“BOOTHãƒ‘ãƒƒã‚¯(ãƒã‚³ãƒã‚¹)', maxWeight: 1000, maxSize: 57, cost: 370 },
      { name: 'ã‚ã‚“ã—ã‚“BOOTHãƒ‘ãƒƒã‚¯(60)', maxWeight: 2000, maxSize: 60, cost: 850 },
      { name: 'ã‚ã‚“ã—ã‚“BOOTHãƒ‘ãƒƒã‚¯(80)', maxWeight: 5000, maxSize: 80, cost: 970 },
      { name: 'ã‚ã‚“ã—ã‚“BOOTHãƒ‘ãƒƒã‚¯(100)', maxWeight: 10000, maxSize: 100, cost: 1100 },
      { name: 'ã‚ã‚“ã—ã‚“BOOTHãƒ‘ãƒƒã‚¯(120)', maxWeight: 15000, maxSize: 120, cost: 1300 },
    ],
    color: '#fc4d50',
    popularity: { fashion: 2, electronics: 2, books: 3, games: 3, beauty: 1, sports: 1, handmade: 5, furniture: 1, baby: 1, general: 2 }
  },
  {
    id: 'jmty',
    name: 'ã‚¸ãƒ¢ãƒ†ã‚£ãƒ¼',
    feeRate: 0.05,
    shipping: [
      { name: 'æ‰‹æ¸¡ã—ï¼ˆé€æ–™ç„¡æ–™ï¼‰', maxWeight: Infinity, maxSize: Infinity, cost: 0 },
      { name: 'ã‚ã‚“ã—ã‚“é…é€(60)', maxWeight: 2000, maxSize: 60, cost: 960 },
      { name: 'ã‚ã‚“ã—ã‚“é…é€(80)', maxWeight: 5000, maxSize: 80, cost: 1070 },
      { name: 'ã‚ã‚“ã—ã‚“é…é€(100)', maxWeight: 10000, maxSize: 100, cost: 1280 },
      { name: 'ã‚ã‚“ã—ã‚“é…é€(140)', maxWeight: 20000, maxSize: 140, cost: 1700 },
    ],
    color: '#00b900',
    popularity: { fashion: 2, electronics: 3, books: 2, games: 2, beauty: 1, sports: 3, handmade: 1, furniture: 5, baby: 3, general: 3 }
  }
];

const PACKAGING = [
  { name: 'ãƒã‚³ãƒã‚¹ç”¨æ®µãƒœãƒ¼ãƒ«', size: '31Ã—23Ã—3cm', price: 'ç´„30å††', maxSize: 57 },
  { name: 'ã‚¯ãƒªãƒƒã‚¯ãƒã‚¹ãƒˆç”¨ç®±', size: '34Ã—25Ã—3cm', price: 'ç´„35å††', maxSize: 62 },
  { name: 'å®…æ€¥ä¾¿ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆå°‚ç”¨ç®±', size: '25Ã—20Ã—5cm', price: '70å††', maxSize: 50 },
  { name: '60ã‚µã‚¤ã‚ºæ®µãƒœãƒ¼ãƒ«', size: '35Ã—25Ã—15cm', price: 'ç´„50å††', maxSize: 75 },
  { name: '80ã‚µã‚¤ã‚ºæ®µãƒœãƒ¼ãƒ«', size: '40Ã—30Ã—20cm', price: 'ç´„80å††', maxSize: 90 },
  { name: '100ã‚µã‚¤ã‚ºæ®µãƒœãƒ¼ãƒ«', size: '44Ã—34Ã—24cm', price: 'ç´„100å††', maxSize: 102 },
  { name: 'A4å°ç­’+ãƒ—ãƒãƒ—ãƒ', size: '33Ã—24cm', price: 'ç´„20å††', maxSize: 60 },
  { name: 'ç´™è¢‹ï¼ˆã‚·ãƒ§ãƒƒãƒ‘ãƒ¼ï¼‰', size: 'å„ç¨®', price: '0å††ï¼ˆå†åˆ©ç”¨ï¼‰', maxSize: 80 },
];

const CATEGORY_TIPS = {
  fashion: { tip: 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ç³»ã¯ãƒ¡ãƒ«ã‚«ãƒªãŒåœ§å€’çš„ã«å£²ã‚Œã‚„ã™ã„ã€‚ãƒ–ãƒ©ãƒ³ãƒ‰å“ã¯ãƒ©ã‚¯ãƒï¼ˆæ‰‹æ•°æ–™6%ï¼‰ã‚‚â—', icon: 'ğŸ‘—' },
  electronics: { tip: 'å®¶é›»ãƒ»é›»å­æ©Ÿå™¨ã¯ãƒ¤ãƒ•ã‚ªã‚¯!ã®ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³å½¢å¼ã§é«˜å€¤ãŒã¤ãã“ã¨ã‚‚ã€‚ãƒ¡ãƒ«ã‚«ãƒªã¯å³æ±ºæ´¾å‘ã‘', icon: 'ğŸ“±' },
  books: { tip: 'æœ¬ãƒ»æ¼«ç”»ã¯ãƒ¡ãƒ«ã‚«ãƒªãŒå›è»¢â—ã€‚ã‚»ãƒƒãƒˆå£²ã‚Šãªã‚‰ãƒ¤ãƒ•ã‚ªã‚¯!ã§é«˜å€¤ã«ãªã‚‹ã“ã¨ã‚‚', icon: 'ğŸ“š' },
  games: { tip: 'ã‚²ãƒ¼ãƒ ã¯ãƒ¡ãƒ«ã‚«ãƒªãŒæœ€é€Ÿã€‚ãƒ¬ãƒˆãƒ­ã‚²ãƒ¼ãƒ ã¯ãƒ¤ãƒ•ã‚ªã‚¯!ã§ãƒ—ãƒ¬ãƒŸã‚¢ãŒã¤ãå ´åˆã‚ã‚Š', icon: 'ğŸ®' },
  beauty: { tip: 'ã‚³ã‚¹ãƒ¡ã¯ãƒ¡ãƒ«ã‚«ãƒªãŒå¼·ã„ã€‚ãƒã‚¤ãƒ–ãƒ©ãƒ³ãƒ‰ã¯ãƒ©ã‚¯ãƒã®æ‰‹æ•°æ–™ã®ä½ã•ãŒæ´»ãã‚‹', icon: 'ğŸ’„' },
  handmade: { tip: 'ãƒãƒ³ãƒ‰ãƒ¡ã‚¤ãƒ‰ã¯BOOTHãŒæ‰‹æ•°æ–™æœ€å®‰ã§ç›¸æ€§â—ã€‚minne/Creemaã‚‚æ¤œè¨ã‚’', icon: 'ğŸ§µ' },
  furniture: { tip: 'å®¶å…·ã¯ã‚¸ãƒ¢ãƒ†ã‚£ãƒ¼ã®æ‰‹æ¸¡ã—ãŒé€æ–™ã‚¼ãƒ­ã§æœ€å¼·ã€‚å¤§å‹å“ã¯é€æ–™ãŒåˆ©ç›Šã‚’é£Ÿã†', icon: 'ğŸª‘' },
  baby: { tip: 'ãƒ™ãƒ“ãƒ¼ç”¨å“ã¯ãƒ¡ãƒ«ã‚«ãƒªã®å›è»¢ãŒé€Ÿã„ã€‚ã¾ã¨ã‚å£²ã‚Šã§é€æ–™ã‚’æŠ‘ãˆã‚‹ã®ãŒã‚³ãƒ„', icon: 'ğŸ‘¶' },
  sports: { tip: 'ã‚¹ãƒãƒ¼ãƒ„ç”¨å“ã¯ãƒ¤ãƒ•ã‚ªã‚¯!ã§é«˜å€¤ãŒã¤ãã‚„ã™ã„ã€‚ã‚¸ãƒ¢ãƒ†ã‚£ãƒ¼ã®æ‰‹æ¸¡ã—ã‚‚äººæ°—', icon: 'âš½' },
  general: { tip: 'è¿·ã£ãŸã‚‰ãƒ¡ãƒ«ã‚«ãƒªã§å‡ºå“ã€‚å£²ã‚Œãªã‘ã‚Œã°ãƒ¤ãƒ•ã‚ªã‚¯!ã«å‡ºå“ã—ç›´ã™ã®ãŒç‹é“ãƒ‘ã‚¿ãƒ¼ãƒ³', icon: 'ğŸ“¦' },
};

function calculate() {
  const price = parseInt(document.getElementById('price').value);
  if (!price || price < 300) {
    alert('300å††ä»¥ä¸Šã®ä¾¡æ ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
    return;
  }
  const cost = parseInt(document.getElementById('cost').value) || 0;
  const weight = parseInt(document.getElementById('weight').value) || 500;
  const sizeW = parseInt(document.getElementById('sizeW').value) || 20;
  const sizeH = parseInt(document.getElementById('sizeH').value) || 15;
  const sizeD = parseInt(document.getElementById('sizeD').value) || 5;
  const totalSize = sizeW + sizeH + sizeD;
  const category = document.getElementById('category').value;

  const results = PLATFORMS.map(platform => {
    const fee = Math.floor(price * platform.feeRate);
    // Find cheapest shipping that fits
    let bestShipping = null;
    for (const ship of platform.shipping) {
      if (weight <= ship.maxWeight && totalSize <= ship.maxSize) {
        if (!bestShipping || ship.cost < bestShipping.cost) {
          bestShipping = ship;
        }
      }
    }
    // Fallback to largest option
    if (!bestShipping) {
      bestShipping = platform.shipping[platform.shipping.length - 1];
    }
    const shipping = bestShipping.cost;
    const profit = price - fee - shipping - cost;
    const profitWithoutCost = price - fee - shipping;
    return {
      ...platform,
      fee,
      shipping,
      shippingMethod: bestShipping.name,
      profit,
      profitWithoutCost,
      netAmount: price - fee - shipping,
      popularityScore: platform.popularity[category] || 3
    };
  });

  // Sort by net amount (hand amount)
  results.sort((a, b) => b.netAmount - a.netAmount);

  const container = document.getElementById('platformCards');
  container.innerHTML = results.map((r, i) => {
    const isBest = i === 0;
    const stars = 'â˜…'.repeat(r.popularityScore) + 'â˜†'.repeat(5 - r.popularityScore);
    return `
      <div class="platform-card ${isBest ? 'best' : ''}">
        <div class="rank">${i + 1}</div>
        <div class="platform-info">
          <h3>${r.name}${isBest ? '<span class="best-badge">ãŠã™ã™ã‚</span>' : ''}</h3>
          <div class="details">
            æ‰‹æ•°æ–™ ${(r.feeRate * 100).toFixed(1)}% ï¼ ${r.shippingMethod}
            <br>å£²ã‚Œã‚„ã™ã•: <span style="color: var(--warning); letter-spacing: -1px">${stars}</span>
          </div>
          <button class="breakdown-toggle" onclick="toggleBreakdown('bd-${r.id}')">â–¶ å†…è¨³ã‚’è¦‹ã‚‹</button>
        </div>
        <div class="platform-amount">
          <div class="label">æ‰‹å–ã‚Šé¡</div>
          <div class="amount">Â¥${r.netAmount.toLocaleString()}</div>
          ${cost > 0 ? `<div class="label" style="color: ${r.profit >= 0 ? 'var(--success)' : 'var(--warning)'}">åˆ©ç›Š Â¥${r.profit.toLocaleString()}</div>` : ''}
        </div>
        <div class="breakdown" id="bd-${r.id}">
          <div class="breakdown-row"><span>å‡ºå“ä¾¡æ ¼</span><span>Â¥${price.toLocaleString()}</span></div>
          <div class="breakdown-row"><span>æ‰‹æ•°æ–™ (${(r.feeRate * 100).toFixed(1)}%)</span><span>-Â¥${r.fee.toLocaleString()}</span></div>
          <div class="breakdown-row"><span>é€æ–™ (${r.shippingMethod})</span><span>-Â¥${r.shipping.toLocaleString()}</span></div>
          ${cost > 0 ? `<div class="breakdown-row"><span>ä»•å…¥ã‚Œå€¤</span><span>-Â¥${cost.toLocaleString()}</span></div>` : ''}
          <div class="breakdown-row total"><span>æ‰‹å–ã‚Šé¡${cost > 0 ? '(åˆ©ç›Š)' : ''}</span><span>Â¥${(cost > 0 ? r.profit : r.netAmount).toLocaleString()}</span></div>
        </div>
      </div>
    `;
  }).join('');

  // Category tip
  const tipData = CATEGORY_TIPS[category];
  document.getElementById('tipsContainer').innerHTML = `
    <div class="tips-card">
      <div class="tip-title">${tipData.icon} ${category === 'general' ? 'å£²ã‚Šå ´é¸ã³ã®ã‚³ãƒ„' : 'ã‚«ãƒ†ã‚´ãƒªåˆ¥ã‚¢ãƒ‰ãƒã‚¤ã‚¹'}</div>
      <p>${tipData.tip}</p>
    </div>
  `;

  // Packaging suggestions
  const suitablePackaging = PACKAGING.filter(p => totalSize <= p.maxSize).slice(0, 3);
  if (suitablePackaging.length > 0) {
    document.getElementById('packagingCard').style.display = 'block';
    document.getElementById('packagingGrid').innerHTML = suitablePackaging.map(p => `
      <div class="pkg-item">
        <div class="pkg-name">${p.name}</div>
        <div class="pkg-size">${p.size}</div>
        <div class="pkg-price">${p.price}</div>
      </div>
    `).join('');
  }

  document.getElementById('results').classList.add('visible');
  document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function toggleBreakdown(id) {
  const el = document.getElementById(id);
  el.classList.toggle('visible');
  const btn = el.previousElementSibling.querySelector('.breakdown-toggle') ||
    el.parentElement.querySelector('.breakdown-toggle');
  if (btn) {
    btn.textContent = el.classList.contains('visible') ? 'â–¼ å†…è¨³ã‚’é–‰ã˜ã‚‹' : 'â–¶ å†…è¨³ã‚’è¦‹ã‚‹';
  }
}
</script>
</body>
</html>
